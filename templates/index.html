<!DOCTYPE html>
<html>
<head>
    <title>ABA Generator</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        textarea { width: 100%; height: 200px; }
        button { padding: 10px 15px; background: #007BFF; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        #output { margin-top: 20px; }
        .section { margin-bottom: 30px; border: 1px solid #ddd; padding: 15px; border-radius: 4px; }
        pre { background: #f4f4f4; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>ABA Generator</h1>
    <textarea id="input" rows="15" cols="60">L: [a,b,x,y,z]
A: [a,b]
C(a): y
C(b): x
[r1]: y <- b
[r2]: y <- y
[r3]: x <- x
[r4]: x <- a
[r5]: z <- x,y
PREF: a > b
    </textarea>
    <button onclick="processInput()">Generate and Convert ABA Framework</button>
    <div id="output"></div>
    <script>
        async function processInput() {
            const input = document.getElementById('input').value;
            const response = await fetch('/process', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ input: input })
            });
            const result = await response.json();
            displayResult(result);
        }

    function displayResult(data) {
        const output = document.getElementById('output');
        let html = '<div class="section"><h2>Original Framework</h2>';
        html += `
            <h3>Language: ${data.original.language.join(', ')}</h3>
            <h3>Assumptions: ${data.original.assumptions.join(', ')}</h3>
            <h3>Contraries:</h3>
            <pre>${JSON.stringify(data.original.contraries, null, 2)}</pre>
            <h3>Rules:</h3>
            <pre>${JSON.stringify(data.original.rules, null, 2)}</pre>
            <h3>Preferences:</h3>
            <pre>${JSON.stringify(data.original.preferences, null, 2)}</pre>
            <h3>Arguments:</h3>
            <pre>${JSON.stringify(data.original.arguments, null, 2)}</pre>
            <h3>Attacks:</h3>
            <pre>${JSON.stringify(data.original.attacks, null, 2)}</pre>
        `;
        html += '</div>';
        if ('non_circular' in data) {
            html += '<div class="section"><h2>Non-circular Framework</h2>';
            html += `
                <h3>Language: ${data.non_circular.language.join(', ')}</h3>
                <h3>Assumptions: ${data.non_circular.assumptions.join(', ')}</h3>
                <h3>Contraries:</h3>
                <pre>${JSON.stringify(data.non_circular.contraries, null, 2)}</pre>
                <h3>Rules:</h3>
                <pre>${JSON.stringify(data.non_circular.rules, null, 2)}</pre>
                <h3>Preferences:</h3>
                <pre>${JSON.stringify(data.non_circular.preferences, null, 2)}</pre>
                <h3>Arguments:</h3>
                <pre>${JSON.stringify(data.non_circular.arguments, null, 2)}</pre>
                <h3>Attacks:</h3>
                <pre>${JSON.stringify(data.non_circular.attacks, null, 2)}</pre>
            `;
            html += '</div>';
        }
        if ('atomic' in data) {
            html += '<div class="section"><h2>Atomic Framework</h2>';
            html += `
                <h3>Language: ${data.atomic.language.join(', ')}</h3>
                <h3>Assumptions: ${data.atomic.assumptions.join(', ')}</h3>
                <h3>Contraries:</h3>
                <pre>${JSON.stringify(data.atomic.contraries, null, 2)}</pre>
                <h3>Rules:</h3>
                <pre>${JSON.stringify(data.atomic.rules, null, 2)}</pre>
                <h3>Preferences:</h3>
                <pre>${JSON.stringify(data.atomic.preferences, null, 2)}</pre>
                <h3>Arguments:</h3>
                <pre>${JSON.stringify(data.atomic.arguments, null, 2)}</pre>
                <h3>Attacks:</h3>
                <pre>${JSON.stringify(data.atomic.attacks, null, 2)}</pre>
            `;
            html += '</div>';
        }
        output.innerHTML = html;
    }</script>
</body>
</html>
